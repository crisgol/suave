<script context="module">
  import { onDestroy } from 'svelte';
  import { readable } from 'svelte/store';

  export class Router {
    constructor(history, parent) {
      // TODO
    }

    register(path, Component) {
      // TODO

      onDestroy(() => this.unregister(path, component));

      const match = readable(() => { /* TODO */ });
      match.replace = Component => { /* TODO */ };

      return match;
    }

    unregister(path, component) {
      // TODO
    }
  }
</script>

<script>
  import { getContext, setContext } from 'svelte';

  export let history;

  const parent = getContext(Router);
  const router = new Router(history, parent);
  
  setContext(Router, router);
</script>

<slot />
